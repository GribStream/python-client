# python-client
Python client library to interface with [GribStream](https://www.gribstream.com)

    from client import GribStreamClient
    import datetime

    with GribStreamClient(apikey=None) as client: # DEMO API token
        start = datetime.datetime.now(datetime.UTC)
        df = client.min_horizon(
            from_time=datetime.datetime(year=2024, month=8, day=10, hour=0),
            until_time=datetime.datetime(year=2024, month=8, day=10, hour=12),
            coordinates=[
                {"lat": 40.75, "lon": -73.98},
                {"lat": 29.75, "lon": -95.36},
            ],
            variables=[
                {"name": "TMP", "level": "2 m above ground", "info": ""},
                {"name": "WIND", "level": "10 m above ground", "info": ""},
                {"name": "DPT", "level": "2 m above ground", "info": ""},
            ],
            # Time travel. Before as_of, forecasted_time is history, after it is the forecast at as_of
            as_of=datetime.datetime(year=2024, month=8, day=10, hour=6),
            min_horizon=1,
            max_horizon=264,
        )
        print(df.sort_values(['forecasted_time', 'lat', 'lon']).to_string(index=False))
        print('response in:', datetime.datetime.now(datetime.UTC) - start)

Output:

    Warning, missing API token. Running in limited DEMO mode.
                forecasted_at           forecasted_time   lat    lon  DPT|2 m above ground|  TMP|2 m above ground|  WIND|10 m above ground|
    2024-08-09 23:00:00+00:00 2024-08-10 00:00:00+00:00 29.75 -95.36                 297.61                 307.18                      2.4
    2024-08-09 23:00:00+00:00 2024-08-10 00:00:00+00:00 40.75 -73.98                 295.21                 296.38                     12.4
    2024-08-10 00:00:00+00:00 2024-08-10 01:00:00+00:00 29.75 -95.36                 297.27                 305.87                      2.0
    2024-08-10 00:00:00+00:00 2024-08-10 01:00:00+00:00 40.75 -73.98                 295.27                 296.27                     11.6
    2024-08-10 01:00:00+00:00 2024-08-10 02:00:00+00:00 29.75 -95.36                 297.72                 304.90                      1.6
    2024-08-10 01:00:00+00:00 2024-08-10 02:00:00+00:00 40.75 -73.98                 295.32                 296.10                     11.2
    2024-08-10 02:00:00+00:00 2024-08-10 03:00:00+00:00 29.75 -95.36                 297.47                 304.05                      1.6
    2024-08-10 02:00:00+00:00 2024-08-10 03:00:00+00:00 40.75 -73.98                 295.07                 295.65                     10.4
    2024-08-10 03:00:00+00:00 2024-08-10 04:00:00+00:00 29.75 -95.36                 298.03                 303.84                      1.2
    2024-08-10 03:00:00+00:00 2024-08-10 04:00:00+00:00 40.75 -73.98                 295.23                 295.84                      9.6
    2024-08-10 04:00:00+00:00 2024-08-10 05:00:00+00:00 29.75 -95.36                 298.46                 303.12                      1.2
    2024-08-10 04:00:00+00:00 2024-08-10 05:00:00+00:00 40.75 -73.98                 295.26                 295.52                      8.8
    2024-08-10 05:00:00+00:00 2024-08-10 06:00:00+00:00 29.75 -95.36                 298.19                 302.71                      1.2
    2024-08-10 05:00:00+00:00 2024-08-10 06:00:00+00:00 40.75 -73.98                 294.99                 295.11                      8.0
    2024-08-10 06:00:00+00:00 2024-08-10 07:00:00+00:00 29.75 -95.36                 298.07                 302.23                      1.2
    2024-08-10 06:00:00+00:00 2024-08-10 07:00:00+00:00 40.75 -73.98                 294.87                 295.03                      7.2
    2024-08-10 06:00:00+00:00 2024-08-10 08:00:00+00:00 29.75 -95.36                 298.06                 301.98                      1.2
    2024-08-10 06:00:00+00:00 2024-08-10 08:00:00+00:00 40.75 -73.98                 294.46                 294.78                      6.8
    2024-08-10 06:00:00+00:00 2024-08-10 09:00:00+00:00 29.75 -95.36                 298.13                 301.57                      1.2
    2024-08-10 06:00:00+00:00 2024-08-10 09:00:00+00:00 40.75 -73.98                 294.93                 294.77                      6.0
    2024-08-10 06:00:00+00:00 2024-08-10 10:00:00+00:00 29.75 -95.36                 297.70                 301.03                      1.6
    2024-08-10 06:00:00+00:00 2024-08-10 10:00:00+00:00 40.75 -73.98                 294.90                 295.03                      5.2
    2024-08-10 06:00:00+00:00 2024-08-10 11:00:00+00:00 29.75 -95.36                 297.36                 301.04                      1.6
    2024-08-10 06:00:00+00:00 2024-08-10 11:00:00+00:00 40.75 -73.98                 295.36                 295.44                      4.8
    response in: 0:00:00.716477
